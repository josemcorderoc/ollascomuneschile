<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ollas comunes de Chile</title>
  <meta charset="utf-8">

  <script src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

  <script src="https://d3js.org/d3.v3.min.js"></script>

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <link rel='shortcut icon' type='image/x-icon' href='assets/favicon.ico'/>


  <style>
    hr, h3 {padding-bottom: 20px;}canvas {background-color: #ffffff;}
    #bargraph {
      width: auto;
      height: auto;
    }

    body, html {
      margin: 0;
      overflow: hidden;
      height:100%;
    }

    .container, .parent{
      height: 100%;
    }

    #right{
      position: relative;
      float: left;
      text-align: center;
      height:500px;
      overflow-y: scroll;
    }

  </style>
</head>
<body>
<div class="header p-4 mb-5 text-center" style="background-color: #7eddfa">
  <div class="row justify-content-center">

    <div class="col-md-4">
      <h2>Ollas Comunes de Chile</h2>
      <p><i>"Hay dos panes. Usted se come dos. Yo ninguno. <br> Consumo promedio: un pan por persona" (Nicanor Parra)</i></p>
      <label><b>Seleccione una comuna:</b></label>
      <select class="form-control" id ='select-comuna'>
        <option disabled selected value> ------ </option>
      </select>

    </div>
    <div class="col-md-4">
      <p align="justify">
        Dada la incapacidad del gobierno de hacer frente al hambre, disponibilizamos esta página donde puedes consultar información actualizada <b>en tiempo real</b> de las ollas comunes por comuna, de acuerdo a información de Twitter, tan solo seleccionando la comuna de interés. <i> (Advertencia: las informaciones vertidas en Twitter dependen de quién las emite y pueden ser falsas.)</i>
      </p>

      <p><small>
        Este proyecto es software libre. Si te interesa saber más, puedes revisar el código fuente en <a href="https://github.com/josemcorderoc/ollascomuneschile">GitHub</a>.
      </small></p>

    <p id="last_update"></p>

    </div>
  </div>
</div>






<script>
    var last_update = document.getElementById("last_update");
    setInterval(() => {
        fetch("{{ url_for('time_feed') }}")
        .then(response => {
                response.text().then(t => {last_update.innerHTML = t})
            });
        }, 1000);
</script>
















<div class="container">
  <div class="row">
    <div class="col-md-6">
      <h3>Tweets de la semana</h3>

    </div>

    <div class="col-md-6"><h3>Tweets más recientes</h3></div>
  </div>
  <div class="row parent">
    <div class="col-md-6">
      <p><i>(Clickea un punto para dirigirte al tweeet correspondiente)</i></p>
      <div class="chart responsive-plot" id="bargraph"></div>
      <hr>
    </div>
    <div id="right" class="col-md-6">
      <div id="latest-tweets"></div>
    </div>

  </div>

</div>

<script src="assets/tweets_embed.js" type="text/javascript"></script>

</body>
</html>
